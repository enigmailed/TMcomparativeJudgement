<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Taskmaster Comparative Judgement Machine</title>
</head>
<body>

  <!-- Show one sample image before welcome -->
  <h3>Sample Image (Series 1)</h3>
  <img
    src="https://static.wikia.nocookie.net/task/images/8/8f/Series_1.jpg/revision/latest/scale-to-width-down/1000?cb=20210115115439"
    alt="Series 1"
    width="500"
  />

  <h1>Welcome</h1>
  <p>Enter your name and email to begin:</p>
  <input id="name" placeholder="Name" /><br /><br />
  <input id="email" placeholder="Email" /><br /><br />
  <button onclick="start()">Start</button>

  <div id="compare" style="display:none;">
    <h2>Pick the image you prefer</h2>
    <img
      id="imgA"
      src=""
      width="500"
      alt="Image A"
      onclick="choose('A')"
      style="margin-right:20px; cursor:pointer;"
    />
    <img
      id="imgB"
      src=""
      width="500"
      alt="Image B"
      onclick="choose('B')"
      style="cursor:pointer;"
    />
    <p id="progress"></p>
  </div>

  <script>

function generatePairs() {
  pairs = [];
  for (let i = 0; i < images.length; i++) {
    for (let j = i + 1; j < images.length; j++) {
      pairs.push([images[i], images[j]]);
    }
  }
  console.log("All pairs generated:", pairs);
  pairs = pairs.sort(() => 0.5 - Math.random()).slice(0, 30);
  console.log("Pairs after shuffle and slice:", pairs);
}

function showNextPair() {
  if (current >= pairs.length) {
    alert("Thanks! You've completed the comparison.");
    return;
  }
  const [a, b] = pairs[current];
  console.log(`Showing pair #${current + 1}`, a.name, b.name);
  document.getElementById("imgA").src = a.url;
  document.getElementById("imgB").src = b.url;
  document.getElementById("imgA").alt = a.name;
  document.getElementById("imgB").alt = b.name;
  document.getElementById("progress").textContent = `Comparison ${
    current + 1
  } of ${pairs.length}`;
}


const images = [
  { id: 1, name: "Series 1", url: "https://static.wikia.nocookie.net/task/images/8/8f/Series_1.jpg" },
  { id: 2, name: "Series 2", url: "https://static.wikia.nocookie.net/task/images/0/05/Series_2.jpg" },
  { id: 3, name: "Series 3", url: "https://static.wikia.nocookie.net/task/images/3/3a/Series_3.jpg" },
  { id: 4, name: "Series 4", url: "https://static.wikia.nocookie.net/task/images/3/3c/Series_4.jpg" },
  { id: 5, name: "Series 5", url: "https://static.wikia.nocookie.net/task/images/f/f3/Series_5.jpg" }
];


    const nameInput = document.getElementById("name");
    const emailInput = document.getElementById("email");
    const compareDiv = document.getElementById("compare");

    let pairs = [];
    let current = 0;

    function generatePairs() {
      pairs = [];
      for (let i = 0; i < images.length; i++) {
        for (let j = i + 1; j < images.length; j++) {
          pairs.push([images[i], images[j]]);
        }
      }
      pairs = pairs.sort(() => 0.5 - Math.random()).slice(0, 30);
    }

    function start() {
      if (!nameInput.value || !emailInput.value)
        return alert("Fill in both fields.");
      generatePairs();
      compareDiv.style.display = "block";
      showNextPair();
    }

    function showNextPair() {
      if (current >= pairs.length) {
        alert("Thanks! You've completed the comparison.");
        return;
      }
      const [a, b] = pairs[current];
      document.getElementById("imgA").src = a.url;
      document.getElementById("imgB").src = b.url;
      document.getElementById("imgA").alt = a.name;
      document.getElementById("imgB").alt = b.name;
      document.getElementById("progress").textContent = `Comparison ${
        current + 1
      } of ${pairs.length}`;
    }

    function choose(choice) {
      const [a, b] = pairs[current];
      const winner = choice === "A" ? a : b;

      // For now, just log to console
      console.log("Choice recorded:", {
        name: nameInput.value,
        email: emailInput.value,
        imageA: a.id,
        imageB: b.id,
        winner: winner.id,
      });

      current++;
      showNextPair();
    }
  </script>
</body>
</html>
